# Проект - Dream job
[![Build Status](https://travis-ci.org/DmitriyYugai/job4j_dreamjob.svg?branch=master)](https://travis-ci.org/DmitriyYugai/job4j_dreamjob)

# Содержание
* [Использованные технологии](#Использованные-технологии)
* [О проекте](#О-проекте)
* [Сборка](#Сборка)
* [Использование](#Использование)
* [Контакты](#Контакты)
## Использованные технологии
* Servlets, JSP
* PostgreSQL
* Collections Framework
* Apache Commons DBCP (Database Connection Pooling)
* Apache Commons FileUpload
* SLF4J и Log4j
* Mockito
* Библиотека GSON
* JSTL, Scriplets
* HTML, CSS
* JS, JQuery, Bootstrap
* Travis CI
## О проекте
* Данное приложение с web-интерфейсом представляет собой биржу работы:<br><br>
![Главная страница](img/about/index.PNG)<br><br>
* Пользователь может быть как кандидатом так и HR. Кандидаты могут вносить в систему данные о себе:<br><br>
![Добавить кандидата](img/about/add_can.PNG)<br><br>
* HR могут публиковать вакансии о работе:<br><br>
![Добавить вакансию](img/about/add_job.PNG)<br><br>
* Проект построен на сервлетах и JSP. Есть 2 слоя: слой контроллеров (реализованный на сервлетах) 
и слой по работе с БД PostgreSQL (реализован на JDBC, также есть возможность хранить данные в памяти с помощью класса MemStore)<br>
* В проекте используется шаблон MVC. Все виды открываются через GET-методы сервлетов, что позволяет отправлять необходимые данные на виды, 
представленные JSP-страницами<br>
* Для реализации логики отображения на JSP-страницах используются Scriplets и JSTL.<br>
* JSP-страницы реализованы на HTML и Bootstrap.
* Реализована возможность добавления фото для кандидата, которое после добавления можно также скачать:<br><br>
![Добавить фото 1](img/about/photo1.PNG)<br><br>
![Добавить фото 2](img/about/photo2.PNG)<br><br>
![Добавить фото 3](img/about/photo3.PNG)<br><br>
* Только авторизованные пользователи могут просматривать списки вакансий и кандидатов, 
а также добавлять новые вакансии и кандидатов. Авторизация построена на основе фильтра (класс AuthFilter) 
и сервлета, выполняющего проверку пароля на соответствие данным из БД (класс AuthServlet). Все зарегистрированные пользователи 
хранятся в БД. Форма авторизации:<br><br>
![Страница авторизации](img/about/auth.PNG)<br><br>
* Добавлена возможность регистрации новых пользователей. Данная функция реализуется сервлетом RegServlet,
 который сохраняет новых пользователей в БД. Форма регистрации:<br><br>
![Страница регистрации](img/about/reg.PNG)<br><br>
* В качестве системы логирования используется связка log4j и slf4j.<br>
* Для работы с JSON-форматом используется библиотека GSON<br>
* Пул соединений к БД основан на Apache Commons DBCP<br>
* Для отображения авторизованного пользователя на всех страницах используется объект Session:<br><br>
![Session 1](img/about/session1.PNG)<br><br>
![Session 2](img/about/session2.PNG)<br><br>
* С помощью JS и JQuery сделана валидация всех форм приложения:<br><br>
![Валидация](img/about/valid.PNG)<br><br>
* Для отображения списка городов на странице добавления и редактирования кандидатов используется технология AJAX 
(посылается AJAX-запрос с помощью JQuery на сервлет CityServlet):<br><br>
![Список городов](img/about/cities.PNG)<br>
## Сборка
1. Установить JDK 14.
2. Скачать Maven.
3. Создать переменные окружения JAVA_HOME и M2_HOME и прописать в переменную окружения Path 
пути до бинарных файлов для JDK и для Maven:<br><br>
![Java Maven installing](img/build/java_maven.PNG)<br><br>
4. Установить сервер БД PostgreSQL. При установке задать:<br>
    * имя пользователя - postgres 
    * пароль - root
    * порт - 5432<br>
Также при установке сервера БД PostgreSQL нужно установить программу pg_Admin.

5. Скачать и установить Tomcat.
6. Скачать исходный код проекта с GitHub.
7. Перейти в корень проекта, где лежит файл pom.xml:<br><br>
![Переход в корень проекта 1](img/build/cd.PNG)<br><br>
![Переход в корень проекта 2](img/build/cd1.PNG)<br><br>
8. С помощью Maven осуществить сборку проекта:<br><br>
![Сборка проекта](img/build/package.PNG)<br><br>
При успешной сборке должна появиться папка target, в которой располагается war-архив:<br><br>
![Сборка прошла успешно](img/build/package1.PNG)<br><br>
![Папка target](img/build/target.PNG)<br><br>
![war-архив](img/build/target1.PNG)<br><br>
9. Переименовать war-архив:<br><br>
![Переименовать war-архив](img/build/target3.PNG)<br><br>
10. Запустить сервер БД, указав путь до папки data:<br><br>
![Запуск сервера БД](img/build/server_start.PNG)<br><br>
11. Запустить программу pg_Admin, установленную вместе с сервером БД PostgreSQL:<br><br>
![Запуск pg_Admin](img/build/pg_admin.PNG)<br><br>
12. Создать БД с названием dreamjob:<br><br>
![БД dreamjob](img/build/dreamjob_db.PNG)<br><br>
13. Открыть Query Tool для созданной БД и запустить SQL-скрипт schema.sql, 
находящийся в папке db (данная папка находится в корне скачанного проекта):<br><br>
![Скрипт schema.sql](img/build/script.PNG)<br><br>
![Запуск скрипта schema.sql](img/build/pg_admin_script.PNG)<br><br>
Если нужно задать другой список городов для кандидатов, то нужно сделать это до запуска SQL-скрипта schema.sql 
в следующих строчках скрипта:<br><br>
![Изменение скрипта schema.sql](img/build/change_script.PNG)<br><br>
14. Задеплоить собранный war-архив в папку webapps, находящуюся в корневой папке скачанного Tomcat:<br><br>
![Деплой war-архива 1](img/build/deploy.PNG)<br><br>
15. Скопировать файл db.properties, находящийся в корне скачанного проекта в папку bin, 
находящуюся в корневой папке скачанного Tomcat:<br><br>
![Деплой war-архива 2](img/build/deploy1.PNG)<br><br>
![Деплой war-архива 3](img/build/deploy2.PNG)<br><br>
Сборка завершена. Теперь можно проверить работу приложения.
## Использование
Запускаем Tomcat:<br><br>
![Запуск Tomcat 1](img/usage/tomcat_start.PNG)<br><br>
![Запуск Tomcat 2](img/usage/tomcat_start1.PNG)<br><br>
Переходим на главную страницу приложения 
[http://localhost:8080/dreamjob/](http://localhost:8080/dreamjob/): <br><br>
![Главная страница](img/usage/index.PNG)<br><br>
При попытке просмотреть список доступных вакансий нас перекидывает на форму авторизации, что означает, 
что с приложением могут работать только авторизованные пользователи. То же самое произойдёт при попытках 
просмотреть список кандидатов и добавить новые вакансии или кандидатов:<br><br>
![Работа без авторизации](img/usage/try_jobs.PNG)<br><br>
Сейчас в БД нет зарегистрированных пользователей, поэтому  сначала зарегистрируемся:<br><br>
![Регистрация](img/usage/reg.PNG)<br><br>
Теперь можно авторизоваться:<br><br>
![Авторизация 1](img/usage/auth1.PNG)<br><br>
![Авторизация 2](img/usage/auth2.PNG)<br><br>
Добавим кандидата:<br><br>
![Добавление кандидата 1](img/usage/add_can1.PNG)<br><br>
![Добавление кандидата 2](img/usage/add_can2.PNG)<br><br>
Отредактируем добавленного кандидата (нажимаем на значок перед именем):<br><br>
![Редактирование кандидата 1](img/usage/edit1.PNG)<br><br>
![Редактирование кандидата 2](img/usage/edit2.PNG)<br><br>
Добавим фото для добавленного кандидата:<br><br>
![Добавление фото 1](img/usage/photo1.PNG)<br><br>
![Добавление фото 2](img/usage/photo2.PNG)<br><br>
Скачаем добавленное фото:<br><br>
![Скачивание фото 1](img/usage/dl_photo1.PNG)<br><br>
![Скачивание фото 2](img/usage/dl_photo2.PNG)<br><br>
Добавим вакансию:<br><br>
![Добавление вакансии 1](img/usage/add_job1.PNG)<br><br>
![Добавление вакансии 2](img/usage/add_job2.PNG)<br><br>
Отредактируем добавленную вакансию:<br><br>
![Редактирование вакансии 1](img/usage/edit_job1.PNG)<br><br>
![Редактирование вакансии 2](img/usage/edit_job2.PNG)<br><br>
Валидация работает на всех формах приложения, даже на форме добавления фото:<br><br>
![Проверка валидации](img/usage/valid.PNG)<br>
## Контакты
Почта: studentnstu97@mail.ru<br>
Skype: live:.cid.9cdc925fb48220b4